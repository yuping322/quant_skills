# å­—æ®µç»Ÿä¸€åŒ–å®Œæ•´å·¥ä½œæµ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æˆ‘ä»¬å·²ç»ä¸ºæ‚¨æ­å»ºäº†ä¸€ä¸ªå®Œæ•´çš„å­—æ®µç»Ÿä¸€åŒ–ç³»ç»Ÿï¼è¿™ä¸ªç³»ç»Ÿå®ç°äº†æ‚¨è¦æ±‚çš„å®Œæ•´æµç¨‹ï¼š

1. âœ… ä» `data/` ç›®å½•å’Œ akshare æ¥å£åˆ†æç»Ÿè®¡æ•°æ®
2. âœ… ç”Ÿæˆç­‰å¾…åˆ†æçš„ Prompts
3. âœ… æ‚¨æ‰‹åŠ¨æ‰§è¡Œ LLM åˆ†æï¼Œç”Ÿæˆé…ç½®
4. âœ… `unified_field_system.py` ä»é…ç½®æ–‡ä»¶è¯»å–å¹¶ä½¿ç”¨

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä¸€é”®å®Œæ•´å·¥ä½œæµï¼ˆæ¨èï¼‰

```bash
python src/scripts/run_complete_workflow.py
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ï¼Œå¹¶åœ¨éœ€è¦æ‚¨æ‰‹åŠ¨æ“ä½œæ—¶æš‚åœã€‚

---

### æ–¹å¼äºŒï¼šåˆ†æ­¥æ‰§è¡Œ

#### Step 1: ç”Ÿæˆåˆ†ææ•°æ®å’Œ Prompts

```bash
python src/scripts/llm_field_analyzer_v2.py
```

**è¾“å‡ºï¼š**
- `analysis/complete_field_statistics.json` - å®Œæ•´å­—æ®µç»Ÿè®¡
- `prompts/enhanced_field_equivalence_analysis.txt` - ç­‰ä»·å…³ç³»åˆ†ææç¤ºè¯
- `prompts/enhanced_field_coverage_analysis.txt` - è¦†ç›–åˆ†ææç¤ºè¯

---

#### Step 2: æ‰‹åŠ¨ LLM åˆ†æï¼ˆæ‚¨éœ€è¦åšçš„ï¼‰

1. æ‰“å¼€ `prompts/enhanced_field_equivalence_analysis.txt`
2. å°†å†…å®¹æäº¤ç»™å¤§æ¨¡å‹ï¼ˆå¦‚ ChatGPTã€Claude ç­‰ï¼‰
3. ä¿å­˜åˆ†æç»“æœä¸º `config/llm_equivalence_analysis.json`

4. æ‰“å¼€ `prompts/enhanced_field_coverage_analysis.txt`
5. å°†å†…å®¹æäº¤ç»™å¤§æ¨¡å‹
6. ä¿å­˜åˆ†æç»“æœä¸º `config/llm_coverage_analysis.json`

**æç¤ºï¼š** å¦‚æœæ‚¨è·³è¿‡è¿™ä¸€æ­¥ï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤é…ç½®ã€‚

---

#### Step 3: ç”Ÿæˆç»Ÿä¸€é…ç½®

```bash
python src/scripts/generate_unified_config.py
```

**è¾“å‡ºï¼š**
- `config/unified_field_config.json` - å®Œæ•´çš„ç»Ÿä¸€å­—æ®µé…ç½®

---

#### Step 4: éªŒè¯é…ç½®

```bash
python src/scripts/validate_field_equivalents.py
```

æ£€æŸ¥å­—æ®µç­‰ä»·å…³ç³»æ˜¯å¦æœ‰é€»è¾‘é”™è¯¯ã€‚

---

#### Step 5: ä½¿ç”¨ç»Ÿä¸€å­—æ®µç³»ç»Ÿ

```python
from unified_field_system import UnifiedFieldSystem

# åˆå§‹åŒ–ç³»ç»Ÿï¼ˆä»é…ç½®æ–‡ä»¶åŠ è½½ï¼‰
system = UnifiedFieldSystem(config_path="config/unified_field_config.json")

# æ‰§è¡Œæ¥å£ï¼ˆè‡ªåŠ¨å¤„ç†å­—æ®µè½¬æ¢ï¼‰
result = system.execute_with_unification(
    api_name="stock_zh_a_hist",
    user_input={
        "ä»£ç ": "000001",
        "å¼€å§‹æ—¥æœŸ": "2024-01-01"
    }
)
```

æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œæµ‹è¯•ï¼š

```bash
python src/test_config_loading.py
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
quant_skills/
â”œâ”€â”€ config/                           # ğŸ”§ é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ llm_equivalence_analysis.json  # LLMåˆ†æç»“æœï¼ˆæ‚¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ llm_coverage_analysis.json     # LLMåˆ†æç»“æœï¼ˆæ‚¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ unified_field_config.json       # æœ€ç»ˆé…ç½®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ data/                             # åŸå§‹æ¥å£æ•°æ®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ mappers/
â”‚   â”‚   â””â”€â”€ field_mapper.py            # å­—æ®µæ˜ å°„å™¨
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ llm_field_analyzer_v2.py   # LLMåˆ†æå™¨ âœ¨
â”‚   â”‚   â”œâ”€â”€ validate_field_equivalents.py # éªŒè¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ generate_unified_config.py  # é…ç½®ç”Ÿæˆå™¨ âœ¨
â”‚   â”‚   â””â”€â”€ run_complete_workflow.py    # å®Œæ•´å·¥ä½œæµè„šæœ¬ âœ¨
â”‚   â”œâ”€â”€ unified_field_system.py        # ç»Ÿä¸€å­—æ®µç³»ç»Ÿï¼ˆå·²ä¿®æ”¹ï¼‰âœ¨
â”‚   â””â”€â”€ test_config_loading.py         # é…ç½®åŠ è½½æµ‹è¯•
â”œâ”€â”€ prompts/                          # ğŸ’¡ æç¤ºè¯ç›®å½•
â”‚   â”œâ”€â”€ enhanced_field_equivalence_analysis.txt
â”‚   â””â”€â”€ enhanced_field_coverage_analysis.txt
â”œâ”€â”€ analysis/                         # ğŸ“Š åˆ†ææŠ¥å‘Šç›®å½•
â”‚   â””â”€â”€ complete_field_statistics.json
â””â”€â”€ docs/                            # ğŸ“š æ–‡æ¡£ç›®å½•
    â”œâ”€â”€ å®Œæ•´å·¥ä½œæµè®¾è®¡.md
    â”œâ”€â”€ LLMå­—æ®µåˆ†æç³»ç»Ÿä½¿ç”¨æŒ‡å—.md
    â””â”€â”€ å®Œæ•´å·¥ä½œæµå¿«é€Ÿå¼€å§‹.md  # æœ¬æ–‡æ¡£
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### config/unified_field_config.json

```json
{
  "version": "1.0",
  "generated_at": "2026-02-18T...",
  "field_equivalents": {
    "date": ["æ—¥æœŸ", "DATE", "TRADE_DATE"],
    "symbol": ["ä»£ç ", "è‚¡ç¥¨ä»£ç ", "code"],
    ...
  },
  "api_mappings": {},
  "value_normalization": {
    "date": { "formatter": "date" },
    "symbol": { "formatter": "stock_code" }
  }
}
```

---

## ğŸ“Š æç¤ºè¯åŒ…å«çš„ä¿¡æ¯

æ¯ä¸ªæç¤ºè¯åŒ…å«ä¸°å¯Œçš„å­—æ®µç»Ÿè®¡æ•°æ®ï¼š

```
1. å­—æ®µ: symbol
   - ä½¿ç”¨æ¬¡æ•°: 316
   - è¾“å…¥å‚æ•°: 308æ¬¡
   - è¾“å‡ºå‚æ•°: 8æ¬¡
   - ä½¿ç”¨æ¥å£æ•°: 314ä¸ª
   - ç¤ºä¾‹æ¥å£: stock_hk_valuation_baidu, ...
   - ç¤ºä¾‹æè¿°: symbol="600030"
```

---

## ğŸ¯ å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ•°æ®åˆ†æ (å·²å®Œæˆ)                                        â”‚
â”‚     python src/scripts/llm_field_analyzer_v2.py            â”‚
â”‚     â†“                                                        â”‚
â”‚     ç”Ÿæˆ: prompts/*.txt, analysis/*.json                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. LLMåˆ†æ (æ‚¨æ‰‹åŠ¨æ‰§è¡Œ)                                     â”‚
â”‚     å°† prompts/*.txt æäº¤ç»™å¤§æ¨¡å‹                             â”‚
â”‚     â†“                                                        â”‚
â”‚     ä¿å­˜: config/llm_*.json                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. é…ç½®ç”Ÿæˆ                                                  â”‚
â”‚     python src/scripts/generate_unified_config.py           â”‚
â”‚     â†“                                                        â”‚
â”‚     ç”Ÿæˆ: config/unified_field_config.json                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. éªŒè¯é…ç½®                                                  â”‚
â”‚     python src/scripts/validate_field_equivalents.py        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. ä½¿ç”¨ç³»ç»Ÿ                                                  â”‚
â”‚     from unified_field_system import UnifiedFieldSystem       â”‚
â”‚     system = UnifiedFieldSystem(config_path="...")          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… å½“å‰çŠ¶æ€

**å·²å®Œæˆçš„å·¥ä½œï¼š**

1. âœ… **æ•°æ®åˆ†æå™¨** - `llm_field_analyzer_v2.py`
   - ä»å®é™…æ•°æ®ä¸­æå–å­—æ®µä¿¡æ¯
   - ç”ŸæˆåŒ…å«è¯¦ç»†ç»Ÿè®¡çš„ Prompts

2. âœ… **é…ç½®ç”Ÿæˆå™¨** - `generate_unified_config.py`
   - ä» LLM åˆ†æç»“æœç”Ÿæˆé…ç½®
   - æ”¯æŒé»˜è®¤é…ç½®ï¼ˆæ— éœ€ LLMï¼‰

3. âœ… **ç»Ÿä¸€å­—æ®µç³»ç»Ÿå‡çº§** - `unified_field_system.py`
   - ä»é…ç½®æ–‡ä»¶è¯»å–å­—æ®µç­‰ä»·å…³ç³»
   - æ”¯æŒé…ç½®çƒ­æ›´æ–°

4. âœ… **å®Œæ•´å·¥ä½œæµè„šæœ¬** - `run_complete_workflow.py`
   - è‡ªåŠ¨åŒ–æ‰§è¡Œæ‰€æœ‰æ­¥éª¤
   - åœ¨éœ€è¦æ—¶æš‚åœç­‰å¾…æ‰‹åŠ¨æ“ä½œ

5. âœ… **æµ‹è¯•é€šè¿‡**
   - é…ç½®åŠ è½½æ­£å¸¸
   - å­—æ®µè½¬æ¢æ­£ç¡®
   - 56ä¸ªæ ‡å‡†å­—æ®µå·²åŠ è½½

---

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®

1. **ç«‹å³å¯ä»¥åšçš„ï¼š**
   - è¿è¡Œ `python src/test_config_loading.py` æµ‹è¯•ç³»ç»Ÿ
   - æŸ¥çœ‹ `prompts/` ç›®å½•ä¸‹çš„æç¤ºè¯
   - æŸ¥çœ‹ `config/unified_field_config.json` é…ç½®æ–‡ä»¶

2. **åç»­å¯ä»¥åšçš„ï¼š**
   - å°†æç¤ºè¯æäº¤ç»™å¤§æ¨¡å‹åˆ†æ
   - ä¿å­˜åˆ†æç»“æœåˆ° `config/` ç›®å½•
   - é‡æ–°ç”Ÿæˆé…ç½®
   - æµ‹è¯•æ–°é…ç½®çš„æ•ˆæœ

3. **è¿­ä»£æ”¹è¿›ï¼š**
   - æ ¹æ®å®é™…ä½¿ç”¨åé¦ˆ
   - å®šæœŸé‡æ–°åˆ†æå­—æ®µ
   - æŒç»­ä¼˜åŒ–é…ç½®

---

## ğŸ‰ æ€»ç»“

ç°åœ¨æ‚¨æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€æ•°æ®é©±åŠ¨çš„ã€å¯é…ç½®çš„å­—æ®µç»Ÿä¸€åŒ–ç³»ç»Ÿï¼

**æ ¸å¿ƒç‰¹ç‚¹ï¼š**
- ğŸ“Š åŸºäºå®é™…æ•°æ®ç»Ÿè®¡
- ğŸ¤– LLM å¢å¼ºçš„è¯­ä¹‰åˆ†æ
- âš™ï¸ é…ç½®ä¸ä»£ç åˆ†ç¦»
- ğŸ”„ æ”¯æŒè¿­ä»£æ”¹è¿›
- âœ… å®Œæ•´çš„éªŒè¯æµ‹è¯•

**æ‚¨çš„å‚ä¸ï¼š**
åªéœ€è¦åœ¨ Step 2 ä¸­å°† Prompts æäº¤ç»™å¤§æ¨¡å‹ï¼Œå…¶ä»–ä¸€åˆ‡éƒ½å·²è‡ªåŠ¨åŒ–ï¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `docs/å®Œæ•´å·¥ä½œæµè®¾è®¡.md` - è¯¦ç»†çš„æ¶æ„è®¾è®¡
- `docs/LLMå­—æ®µåˆ†æç³»ç»Ÿä½¿ç”¨æŒ‡å—.md` - LLM å·¥å…·ä½¿ç”¨è¯´æ˜
- `docs/å­—æ®µç­‰ä»·å…³ç³»éªŒè¯æŒ‡å—.md` - éªŒè¯å·¥å…·è¯´æ˜

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸš€**
